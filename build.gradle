plugins {
    id 'java-library'
    id 'com.github.johnrengelman.shadow' version '8.1.1' // For Java 8
}

group = 'org.oldskooler'
version = '1.0.0'

repositories {
    mavenCentral()
    maven { url 'https://jitpack.io' }
}

dependencies {
    api 'io.netty:netty-all:4.2.4.Final'
    api 'com.fasterxml.jackson.core:jackson-databind:2.17.2'
    api 'com.fasterxml.jackson.core:jackson-annotations:2.17.2'
    api 'com.fasterxml.jackson.core:jackson-core:2.17.2'
    api 'com.github.Quackster:Inject4j:v1.0.0'
}

java {
    withSourcesJar()   // replaces custom sourcesJar task
    withJavadocJar()   // replaces custom javadocJar task
    toolchain { languageVersion = JavaLanguageVersion.of(8) } // (optional) pick your Java
}

// Configure the shadow jar (fat jar). Defaults to classifier "all".
// Set the file name explicitly to match your old pattern if desired.
tasks.shadowJar {
    // Produces <project.name>-<project.version>.jar (no "-all" suffix). Comment out to keep default.
    archiveClassifier.set("")
    archiveFileName.set("${project.name}-${project.version}.jar")
    minimize()
}

artifacts {
    archives tasks.named('shadowJar')
}